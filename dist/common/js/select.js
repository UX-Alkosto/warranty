/*! warranty - v1.0.0 */
export default class Select{constructor(e){this.element=e,this.label=e.labels[0],this.options=getOptions(e.querySelectorAll("option")),this.customElement=document.createElement("div"),this.arrowElement=document.createElement("span"),this.labelElement=document.createElement("span"),this.valueElement=document.createElement("span"),this.optionsCustomElement=document.createElement("ul"),initSelect(this),this.element.style.display="none",this.element.setAttribute("aria-hidden",!0),this.label.style.display="none",e.after(this.customElement)}get selectedOption(){return this.options.find(e=>e.selected)}selectValue(e){const t=this.options.find(t=>t.value===e),l=this.selectedOption;l.selected=!1,l.element.selected=!1,t.selected=!0,t.element.selected=!0,this.element.dispatchEvent(new Event("change")),this.valueElement.innerText=t.label,this.valueElement.dataset.status="filled"}};function initSelect(e){HTMLSelectElement.prototype.refresh=function(){this.dispatchEvent(new Event("refresh"))},e.element.disabled&&e.customElement.classList.add("disabled"),e.customElement.classList.add("custom-select__container"),e.customElement.tabIndex=0,e.customElement.setAttribute("aria-labelledby",`${e.element.id}-label`),e.labelElement.classList.add("custom-select__label"),e.labelElement.id=`${e.element.id}-label`,e.labelElement.innerText=e.label.textContent,e.customElement.append(e.labelElement);const t=document.createElement("span");t.classList.add("alk-icon-arrow-down"),e.arrowElement.append(t),e.arrowElement.classList.add("custom-select__arrow"),e.customElement.append(e.arrowElement),e.valueElement.classList.add("custom-select__value"),e.valueElement.innerText=e.selectedOption.label,e.customElement.append(e.valueElement),e.optionsCustomElement.classList.add("custom-select__options"),renderOptions(e),e.customElement.append(e.optionsCustomElement),e.element.addEventListener("refresh",()=>{e.element.disabled?e.customElement.classList.add("disabled"):e.customElement.classList.remove("disabled"),e.options=getOptions(e.element.querySelectorAll("option")),e.valueElement.innerText=e.selectedOption.label,e.valueElement.dataset.status="",renderOptions(e)}),e.arrowElement.addEventListener("click",()=>showOptions(e)),e.valueElement.addEventListener("click",()=>showOptions(e)),e.customElement.addEventListener("blur",()=>{e.arrowElement.querySelector("span").classList.replace("alk-icon-arrow-up","alk-icon-arrow-down"),e.optionsCustomElement.classList.remove("show")})}function showOptions(e){if(e.customElement.classList.contains("disabled"))return;const t=e.arrowElement.querySelector("span");t.classList.contains("alk-icon-arrow-down")?t.classList.replace("alk-icon-arrow-down","alk-icon-arrow-up"):t.classList.replace("alk-icon-arrow-up","alk-icon-arrow-down"),e.optionsCustomElement.classList.toggle("show")}function renderOptions(e){e.optionsCustomElement.innerHtml="",e.optionsCustomElement.querySelectorAll("*").forEach(e=>e.remove()),e.options.forEach(t=>{const l=document.createElement("li");l.classList.add("custom-select__option"),l.classList.toggle("selected",t.selected),l.setAttribute("role","option"),t.selected&&l.setAttribute("aria-selected",!0),l.innerText=t.label,l.dataset.value=t.value,"0"===t.value&&(l.style.display="none"),l.addEventListener("click",()=>{if("0"===l.dataset.value)return;let s=e.optionsCustomElement.querySelector(`[data-value="${e.selectedOption.value}"]`);s.removeAttribute("aria-selected"),s.classList.remove("selected"),e.selectValue(t.value),l.classList.add("selected"),l.setAttribute("aria-selected",!0),e.optionsCustomElement.classList.remove("show"),e.customElement.blur()}),e.optionsCustomElement.append(l)})}function getOptions(e){return[...e].map(e=>({value:e.value,label:e.label,selected:e.selected,element:e}))}